<div class="container py-4" data-page-id="club-show">
    <div class="row">
        <div class="col-lg-8">
            <!-- Club Header -->
            <div class="card shadow mb-4">
                <div class="card-body">
                    <div class="row">
                        <!-- Logo Column - Full Height Left Side -->
                        <div class="col-md-4 d-flex align-items-start justify-content-center">
                            <% 
                            // Show club logo or fallback to missing.svg
                            const clubLogoURL = club.logoUrl || '/icons/missing.svg';
                            %>
                            <img src="<%= clubLogoURL %>" alt="<%= club.clubName %> Logo" 
                                 class="img-fluid" style="max-height: 300px; width: auto; object-fit: contain;">
                        </div>
                        
                        <!-- Content Column -->
                        <div class="col-md-8">
                            <div class="h-100 d-flex flex-column">
                                <!-- Club Info -->
                                <div class="mb-4">
                                    <h1 class="h2 mb-2"><%= club.clubName %></h1>
                                    <% if (club.location) { %>
                                        <p class="mb-1 text-muted">
                                            <i class="fas fa-map-marker-alt me-1"></i><%= club.location %>
                                            <% if (club.state) { %>
                                                <span class="badge bg-primary ms-2"><%= club.state %></span>
                                            <% } %>
                                        </p>
                                    <% } %>
                                    <% if (club.establishedYear) { %>
                                        <p class="mb-0 text-muted">
                                            <i class="fas fa-calendar me-1"></i>Established <%= club.establishedYear %>
                                        </p>
                                    <% } %>
                                </div>

                                <% if (club.description) { %>
                                    <div class="mb-4 flex-grow-1">
                                        <h5>About Us</h5>
                                        <p style="white-space: pre-line;"><%= club.description %></p>
                                    </div>
                                <% } %>

                                <!-- Club Statistics -->
                                <div class="row text-center mt-auto">
                                    <div class="col-4">
                                        <div class="stat-item">
                                            <h4 class="text-primary"><%= clubCarnivals.length %></h4>
                                            <p class="text-muted mb-0 small">Carnivals Hosted</p>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="stat-item">
                                            <h4 class="text-success"><%= upcomingCarnivals %></h4>
                                            <p class="text-muted mb-0 small">Upcoming Carnivals</p>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="stat-item">
                                            <% if (club.establishedYear) { %>
                                                <h4 class="text-warning"><%= new Date().getFullYear() - club.establishedYear %></h4>
                                                <p class="text-muted mb-0 small">Years Active</p>
                                            <% } else { %>
                                                <h4 class="text-info">-</h4>
                                                <p class="text-muted mb-0 small">Years Active</p>
                                            <% } %>
                                        </div>
                                    </div>
                                </div>

                                <!-- Gallery Link -->
                                <div class="mt-3 text-center">
                                    <a href="/clubs/<%= club.id %>/gallery" class="btn btn-outline-primary btn-sm">
                                        <i class="fas fa-images me-1"></i>
                                        View Club Gallery
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Hosted Carnivals Section -->
            <div class="card shadow mb-4">
                <div class="card-header bg-primary d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">
                        <i class="fas fa-calendar-alt me-2"></i>Carnivals Hosted by <%= club.clubName %>
                    </h5>
                    <span class="badge bg-light text-primary"><%= clubCarnivals.length %> Total</span>
                </div>
                <div class="card-body">
                    <% if (clubCarnivals.length > 0) { %>
                        <!-- Filter Tabs -->
                        <ul class="nav nav-tabs mb-3" id="carnivalTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="upcoming-tab" data-bs-toggle="tab" 
                                        data-bs-target="#upcoming" type="button" role="tab">
                                    Upcoming Carnivals (<%= upcomingCarnivals %>)
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="past-tab" data-bs-toggle="tab" 
                                        data-bs-target="#past" type="button" role="tab">
                                    Past Carnivals (<%= clubCarnivals.length - upcomingCarnivals %>)
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="all-tab" data-bs-toggle="tab" 
                                        data-bs-target="#all" type="button" role="tab">
                                    All Carnivals (<%= clubCarnivals.length %>)
                                </button>
                            </li>
                        </ul>

                        <!-- Tab Content -->
                        <div class="tab-content" id="carnivalTabContent">
                            <!-- Upcoming Carnivals -->
                            <div class="tab-pane fade show active" id="upcoming" role="tabpanel">
                                <% 
                                const upcoming = clubCarnivals.filter(carnival => 
                                    new Date(carnival.date) >= new Date()
                                ).sort((a, b) => new Date(a.date) - new Date(b.date));
                                %>
                                <% if (upcoming.length > 0) { %>
                                    <div class="row">
                                        <% upcoming.forEach(carnival => { %>
                                            <div class="col-md-6 mb-3">
                                                <div class="card h-100 border-success">
                                                    <% if (carnival.promotionalImageURL) { %>
                                                        <img src="<%= carnival.promotionalImageURL %>" 
                                                             class="card-img-top" style="height: 150px; object-fit: cover;">
                                                    <% } %>
                                                    <div class="card-body d-flex flex-column">
                                                        <h6 class="card-title">
                                                            <a href="/carnivals/<%= carnival.id %>" class="text-decoration-none">
                                                                <%= carnival.title %>
                                                            </a>
                                                        </h6>
                                                        <p class="card-text text-muted small mb-2">
                                                            <i class="fas fa-calendar me-1"></i>
                                                            <%= new Date(carnival.date).toLocaleDateString('en-AU', { 
                                                                weekday: 'short', 
                                                                month: 'short', 
                                                                day: 'numeric',
                                                                year: 'numeric'
                                                            }) %>
                                                        </p>
                                                        <p class="card-text text-muted small mb-2">
                                                            <i class="fas fa-map-marker-alt me-1"></i>
                                                            <%= carnival.locationAddress %>
                                                        </p>
                                                        <div class="mt-auto">
                                                            <span class="badge bg-primary me-1">Upcoming</span>
                                                            <span class="badge state-<%= carnival.state.toLowerCase() %>"><%= carnival.state %></span>
                                                        </div>
                                                    </div>
                                                    <div class="card-footer bg-transparent">
                                                        <a href="/carnivals/<%= carnival.id %>" class="btn btn-primary btn-sm">
                                                            <i class="fas fa-eye me-1"></i>View Details
                                                        </a>
                                                        <% if (carnival.registrationLink) { %>
                                                            <a href="<%= carnival.registrationLink %>" target="_blank" 
                                                               class="btn btn-light btn-sm">
                                                                <i class="fas fa-user-plus me-1"></i>Register
                                                            </a>
                                                        <% } %>
                                                    </div>
                                                </div>
                                            </div>
                                        <% }); %>
                                    </div>
                                <% } else { %>
                                    <div class="text-center py-4">
                                        <i class="fas fa-calendar-times fa-3x text-muted mb-3"></i>
                                        <h5 class="text-muted">No upcoming carnivals</h5>
                                        <p class="text-muted">This club doesn't have any upcoming events scheduled.</p>
                                    </div>
                                <% } %>
                            </div>

                            <!-- Past Carnivals -->
                            <div class="tab-pane fade" id="past" role="tabpanel">
                                <% 
                                const past = clubCarnivals.filter(carnival => 
                                    new Date(carnival.date) < new Date()
                                ).sort((a, b) => new Date(b.date) - new Date(a.date));
                                %>
                                <% if (past.length > 0) { %>
                                    <div class="row">
                                        <% past.forEach(carnival => { %>
                                            <div class="col-md-6 mb-3">
                                                <div class="card h-100">
                                                    <% if (carnival.promotionalImageURL) { %>
                                                        <img src="<%= carnival.promotionalImageURL %>" 
                                                             class="card-img-top" style="height: 150px; object-fit: cover;">
                                                    <% } %>
                                                    <div class="card-body d-flex flex-column">
                                                        <h6 class="card-title">
                                                            <a href="/carnivals/<%= carnival.id %>" class="text-decoration-none">
                                                                <%= carnival.title %>
                                                            </a>
                                                        </h6>
                                                        <p class="card-text text-muted small mb-2">
                                                            <i class="fas fa-calendar me-1"></i>
                                                            <%= new Date(carnival.date).toLocaleDateString('en-AU', { 
                                                                weekday: 'short', 
                                                                month: 'short', 
                                                                day: 'numeric',
                                                                year: 'numeric'
                                                            }) %>
                                                        </p>
                                                        <p class="card-text text-muted small mb-2">
                                                            <i class="fas fa-map-marker-alt me-1"></i>
                                                            <%= carnival.locationAddress %>
                                                        </p>
                                                        <div class="mt-auto">
                                                            <span class="badge bg-secondary me-1">Past Carnival</span>
                                                            <span class="badge state-<%= carnival.state.toLowerCase() %>"><%= carnival.state %></span>
                                                        </div>
                                                    </div>
                                                    <div class="card-footer bg-transparent">
                                                        <a href="/carnivals/<%= carnival.id %>" class="btn btn-outline-primary btn-sm">
                                                            <i class="fas fa-eye me-1"></i>View Details
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        <% }); %>
                                    </div>
                                <% } else { %>
                                    <div class="text-center py-4">
                                        <i class="fas fa-history fa-3x text-muted mb-3"></i>
                                        <h5 class="text-muted">No past carnivals</h5>
                                        <p class="text-muted">This club hasn't hosted any past events yet.</p>
                                    </div>
                                <% } %>
                            </div>

                            <!-- All Carnivals -->
                            <div class="tab-pane fade" id="all" role="tabpanel">
                                <div class="row">
                                    <% clubCarnivals.forEach(carnival => { %>
                                        <div class="col-md-6 mb-3">
                                            <div class="card h-100 <%= new Date(carnival.date) >= new Date() ? 'border-success' : '' %>">
                                                <% if (carnival.promotionalImageURL) { %>
                                                    <img src="<%= carnival.promotionalImageURL %>" 
                                                         class="card-img-top" style="height: 150px; object-fit: cover;">
                                                <% } %>
                                                <div class="card-body d-flex flex-column">
                                                    <h6 class="card-title">
                                                        <a href="/carnivals/<%= carnival.id %>" class="text-decoration-none">
                                                            <%= carnival.title %>
                                                        </a>
                                                    </h6>
                                                    <p class="card-text text-muted small mb-2">
                                                        <i class="fas fa-calendar me-1"></i>
                                                        <%= new Date(carnival.date).toLocaleDateString('en-AU', { 
                                                            weekday: 'short', 
                                                            month: 'short', 
                                                            day: 'numeric',
                                                            year: 'numeric'
                                                        }) %>
                                                    </p>
                                                    <p class="card-text text-muted small mb-2">
                                                        <i class="fas fa-map-marker-alt me-1"></i>
                                                        <%= carnival.locationAddress %>
                                                    </p>
                                                    <div class="mt-auto">
                                                        <% if (new Date(carnival.date) >= new Date()) { %>
                                                            <span class="badge bg-primary me-1">Upcoming</span>
                                                        <% } else { %>
                                                            <span class="badge bg-secondary me-1">Past Carnival</span>
                                                        <% } %>
                                                        <span class="badge state-<%= carnival.state.toLowerCase() %>"><%= carnival.state %></span>
                                                    </div>
                                                </div>
                                                <div class="card-footer bg-transparent">
                                                    <a href="/carnivals/<%= carnival.id %>" class="btn btn-primary btn-sm">
                                                        <i class="fas fa-eye me-1"></i>View Details
                                                    </a>
                                                    <% if (new Date(carnival.date) >= new Date() && carnival.registrationLink) { %>
                                                        <a href="<%= carnival.registrationLink %>" target="_blank" 
                                                           class="btn btn-light btn-sm">
                                                            <i class="fas fa-user-plus me-1"></i>Register
                                                        </a>
                                                    <% } %>
                                                </div>
                                            </div>
                                        </div>
                                    <% }); %>
                                </div>
                            </div>
                        </div>
                    <% } else { %>
                        <div class="text-center py-5">
                            <i class="fas fa-calendar-plus fa-4x text-muted mb-3"></i>
                            <h4 class="text-muted">No Carnivals Yet</h4>
                            <p class="text-muted mb-4">This club hasn't hosted any carnivals on our platform yet.</p>
                            <% if (user && user.clubId && user.clubId.toString() === club.id.toString()) { %>
                                <a href="/carnivals/new" class="btn btn-primary">
                                    <i class="fas fa-plus me-2"></i>Add Your First Carnival
                                </a>
                            <% } %>
                        </div>
                    <% } %>
                </div>
            </div>

            <!-- Attending Carnivals Section -->
            <div class="card shadow mb-4">
                <div class="card-header bg-info text-dark d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">
                        <i class="fas fa-users me-2"></i>Carnivals Attended by <%= club.clubName %>
                    </h5>
                    <span class="badge bg-light text-info"><%= attendingCarnivals.length %> Total</span>
                </div>
                <div class="card-body">
                    <% if (attendingCarnivals.length > 0) { %>
                        <!-- Filter Tabs -->
                        <ul class="nav nav-tabs mb-3" id="attendingCarnivalTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="upcoming-attending-tab" data-bs-toggle="tab" 
                                        data-bs-target="#upcoming-attending" type="button" role="tab">
                                    Upcoming Carnivals (<%= upcomingAttendingCarnivals %>)
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="past-attending-tab" data-bs-toggle="tab" 
                                        data-bs-target="#past-attending" type="button" role="tab">
                                    Past Carnivals (<%= attendingCarnivals.length - upcomingAttendingCarnivals %>)
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="all-attending-tab" data-bs-toggle="tab" 
                                        data-bs-target="#all-attending" type="button" role="tab">
                                    All Carnivals (<%= attendingCarnivals.length %>)
                                </button>
                            </li>
                        </ul>

                        <!-- Tab Content -->
                        <div class="tab-content" id="attendingCarnivalTabContent">
                            <!-- Upcoming Attending Carnivals -->
                            <div class="tab-pane fade show active" id="upcoming-attending" role="tabpanel">
                                <% 
                                const upcomingAttending = attendingCarnivals.filter(carnival => 
                                    new Date(carnival.date) >= new Date()
                                ).sort((a, b) => new Date(a.date) - new Date(b.date));
                                %>
                                <% if (upcomingAttending.length > 0) { %>
                                    <div class="row">
                                        <% upcomingAttending.forEach(carnival => { %>
                                            <div class="col-md-6 mb-3">
                                                <div class="card h-100 border-info">
                                                    <% if (carnival.promotionalImageURL) { %>
                                                        <img src="<%= carnival.promotionalImageURL %>" 
                                                             class="card-img-top" style="height: 150px; object-fit: cover;">
                                                    <% } %>
                                                    <div class="card-body d-flex flex-column">
                                                        <h6 class="card-title">
                                                            <a href="/carnivals/<%= carnival.id %>" class="text-decoration-none">
                                                                <%= carnival.title %>
                                                            </a>
                                                        </h6>
                                                        <p class="card-text text-muted small mb-2">
                                                            <i class="fas fa-calendar me-1"></i>
                                                            <%= new Date(carnival.date).toLocaleDateString('en-AU', { 
                                                                weekday: 'short', 
                                                                month: 'short', 
                                                                day: 'numeric',
                                                                year: 'numeric'
                                                            }) %>
                                                        </p>
                                                        <p class="card-text text-muted small mb-2">
                                                            <i class="fas fa-map-marker-alt me-1"></i>
                                                            <%= carnival.locationAddress %>
                                                        </p>
                                                        <% if (carnival.creator) { %>
                                                            <p class="card-text text-muted small mb-2">
                                                                <i class="fas fa-user me-1"></i>
                                                                Hosted by <%= carnival.creator.firstName %> <%= carnival.creator.lastName %>
                                                            </p>
                                                        <% } %>
                                                        <div class="mt-auto">
                                                            <span class="badge bg-info text-dark me-1">Attending</span>
                                                            <span class="badge state-<%= carnival.state.toLowerCase() %>"><%= carnival.state %></span>
                                                        </div>
                                                    </div>
                                                    <div class="card-footer bg-transparent">
                                                        <a href="/carnivals/<%= carnival.id %>" class="btn btn-primary btn-sm">
                                                            <i class="fas fa-eye me-1"></i>View Details
                                                        </a>
                                                        <% if (carnival.registrationLink) { %>
                                                            <a href="<%= carnival.registrationLink %>" target="_blank" 
                                                               class="btn btn-light btn-sm">
                                                                <i class="fas fa-user-plus me-1"></i>Register
                                                            </a>
                                                        <% } %>
                                                    </div>
                                                </div>
                                            </div>
                                        <% }); %>
                                    </div>
                                <% } else { %>
                                    <div class="text-center py-4">
                                        <i class="fas fa-calendar-times fa-3x text-muted mb-3"></i>
                                        <h5 class="text-muted">No upcoming events to attend</h5>
                                        <p class="text-muted">This club isn't registered for any upcoming carnivals.</p>
                                    </div>
                                <% } %>
                            </div>

                            <!-- Past Attending Carnivals -->
                            <div class="tab-pane fade" id="past-attending" role="tabpanel">
                                <% 
                                const pastAttending = attendingCarnivals.filter(carnival => 
                                    new Date(carnival.date) < new Date()
                                ).sort((a, b) => new Date(b.date) - new Date(a.date));
                                %>
                                <% if (pastAttending.length > 0) { %>
                                    <div class="row">
                                        <% pastAttending.forEach(carnival => { %>
                                            <div class="col-md-6 mb-3">
                                                <div class="card h-100">
                                                    <% if (carnival.promotionalImageURL) { %>
                                                        <img src="<%= carnival.promotionalImageURL %>" 
                                                             class="card-img-top" style="height: 150px; object-fit: cover;">
                                                    <% } %>
                                                    <div class="card-body d-flex flex-column">
                                                        <h6 class="card-title">
                                                            <a href="/carnivals/<%= carnival.id %>" class="text-decoration-none">
                                                                <%= carnival.title %>
                                                            </a>
                                                        </h6>
                                                        <p class="card-text text-muted small mb-2">
                                                            <i class="fas fa-calendar me-1"></i>
                                                            <%= new Date(carnival.date).toLocaleDateString('en-AU', { 
                                                                weekday: 'short', 
                                                                month: 'short', 
                                                                day: 'numeric',
                                                                year: 'numeric'
                                                            }) %>
                                                        </p>
                                                        <p class="card-text text-muted small mb-2">
                                                            <i class="fas fa-map-marker-alt me-1"></i>
                                                            <%= carnival.locationAddress %>
                                                        </p>
                                                        <% if (carnival.creator) { %>
                                                            <p class="card-text text-muted small mb-2">
                                                                <i class="fas fa-user me-1"></i>
                                                                Hosted by <%= carnival.creator.firstName %> <%= carnival.creator.lastName %>
                                                            </p>
                                                        <% } %>
                                                        <div class="mt-auto">
                                                            <span class="badge bg-secondary me-1">Attended</span>
                                                            <span class="badge state-<%= carnival.state.toLowerCase() %>"><%= carnival.state %></span>
                                                        </div>
                                                    </div>
                                                    <div class="card-footer bg-transparent">
                                                        <a href="/carnivals/<%= carnival.id %>" class="btn btn-outline-primary btn-sm">
                                                            <i class="fas fa-eye me-1"></i>View Details
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        <% }); %>
                                    </div>
                                <% } else { %>
                                    <div class="text-center py-4">
                                        <i class="fas fa-history fa-3x text-muted mb-3"></i>
                                        <h5 class="text-muted">No past events attended</h5>
                                        <p class="text-muted">This club hasn't attended any past carnivals yet.</p>
                                    </div>
                                <% } %>
                            </div>

                            <!-- All Attending Carnivals -->
                            <div class="tab-pane fade" id="all-attending" role="tabpanel">
                                <div class="row">
                                    <% attendingCarnivals.forEach(carnival => { %>
                                        <div class="col-md-6 mb-3">
                                            <div class="card h-100 <%= new Date(carnival.date) >= new Date() ? 'border-info' : '' %>">
                                                <% if (carnival.promotionalImageURL) { %>
                                                    <img src="<%= carnival.promotionalImageURL %>" 
                                                         class="card-img-top" style="height: 150px; object-fit: cover;">
                                                <% } %>
                                                <div class="card-body d-flex flex-column">
                                                    <h6 class="card-title">
                                                        <a href="/carnivals/<%= carnival.id %>" class="text-decoration-none">
                                                            <%= carnival.title %>
                                                        </a>
                                                    </h6>
                                                    <p class="card-text text-muted small mb-2">
                                                        <i class="fas fa-calendar me-1"></i>
                                                        <%= new Date(carnival.date).toLocaleDateString('en-AU', { 
                                                            weekday: 'short', 
                                                            month: 'short', 
                                                            day: 'numeric',
                                                            year: 'numeric'
                                                        }) %>
                                                    </p>
                                                    <p class="card-text text-muted small mb-2">
                                                        <i class="fas fa-map-marker-alt me-1"></i>
                                                        <%= carnival.locationAddress %>
                                                    </p>
                                                    <% if (carnival.creator) { %>
                                                        <p class="card-text text-muted small mb-2">
                                                            <i class="fas fa-user me-1"></i>
                                                            Hosted by <%= carnival.creator.firstName %> <%= carnival.creator.lastName %>
                                                        </p>
                                                    <% } %>
                                                    <div class="mt-auto">
                                                        <% if (new Date(carnival.date) >= new Date()) { %>
                                                            <span class="badge bg-info text-dark me-1">Attending</span>
                                                        <% } else { %>
                                                            <span class="badge bg-secondary me-1">Attended</span>
                                                        <% } %>
                                                        <span class="badge state-<%= carnival.state.toLowerCase() %>"><%= carnival.state %></span>
                                                    </div>
                                                </div>
                                                <div class="card-footer bg-transparent">
                                                    <a href="/carnivals/<%= carnival.id %>" class="btn btn-primary btn-sm">
                                                        <i class="fas fa-eye me-1"></i>View Details
                                                    </a>
                                                    <% if (new Date(carnival.date) >= new Date() && carnival.registrationLink) { %>
                                                        <a href="<%= carnival.registrationLink %>" target="_blank" 
                                                           class="btn btn-light btn-sm">
                                                            <i class="fas fa-user-plus me-1"></i>Register
                                                        </a>
                                                    <% } %>
                                                </div>
                                            </div>
                                        </div>
                                    <% }); %>
                                </div>
                            </div>
                        </div>
                    <% } else { %>
                        <div class="text-center py-5">
                            <i class="fas fa-users fa-4x text-muted mb-3"></i>
                            <h4 class="text-muted">Not Attending Any Carnivals</h4>
                            <p class="text-muted mb-4">This club isn't currently registered to attend any carnivals.</p>
                            <% if (user && user.clubId && user.clubId.toString() === club.id.toString()) { %>
                                <p class="text-muted">Visit carnival pages and register your club as an attendee to see them listed here.</p>
                                <a href="/carnivals" class="btn btn-primary">
                                    <i class="fas fa-search me-2"></i>Browse Carnivals
                                </a>
                            <% } %>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="col-lg-4">
            <!-- Club Sponsors Section -->
            <% if (sponsors && sponsors.length > 0) { %>
                <div class="card shadow mb-4">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0"><i class="bi bi-star-fill"></i> Club Sponsors</h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <% sponsors.forEach((sponsor, index) => { %>
                                <div class="col-12">
                                    <div class="d-flex align-items-center p-2 border rounded">
                                        <% if (sponsor.logoUrl) { %>
                                            <img src="<%= sponsor.logoUrl %>" alt="<%= sponsor.sponsorName %> Logo" 
                                                 class="me-3" style="height: 40px; width: auto; max-width: 60px; object-fit: contain;">
                                        <% } else { %>
                                            <div class="me-3 d-flex align-items-center justify-content-center bg-light border rounded" 
                                                 style="height: 40px; width: 60px; min-width: 60px;">
                                                <i class="bi bi-building text-muted"></i>
                                            </div>
                                        <% } %>
                                        <div class="flex-grow-1">
                                            <h6 class="mb-1">
                                                <a href="/sponsors/<%= sponsor.id %>" class="text-decoration-none">
                                                    <%= sponsor.sponsorName %>
                                                </a>
                                            </h6>
                                            <% if (sponsor.sponsorshipLevel) { %>
                                                <span class="badge bg-secondary small"><%= sponsor.sponsorshipLevel %></span>
                                            <% } %>
                                            <% if (sponsor.businessType) { %>
                                                <div class="text-muted small"><%= sponsor.businessType %></div>
                                            <% } %>
                                        </div>
                                    </div>
                                </div>
                            <% }); %>
                        </div>
                    </div>
                </div>
            <% } %>

            <!-- Contact Information -->
            <% if (club.contactPerson || club.contactEmail || club.contactPhone || club.website) { %>
                <div class="card shadow mb-4 club-contact-card">
                    <div class="card-header bg-light">
                        <h5 class="mb-0"><i class="bi bi-person-lines-fill me-2"></i>Contact Information</h5>
                    </div>
                    <div class="card-body">
                        <% if (club.contactPerson) { %>
                            <div class="mb-3">
                                <strong><i class="bi bi-person me-2"></i>Contact Person:</strong><br>
                                <span class="text-muted"><%= club.contactPerson %></span>
                            </div>
                        <% } %>
                        <% if (club.contactEmail) { %>
                            <div class="mb-3">
                                <strong><i class="bi bi-envelope me-2"></i>Email:</strong><br>
                                <a href="mailto:<%= club.contactEmail %>" class="text-decoration-none">
                                    <%= club.contactEmail %>
                                </a>
                            </div>
                        <% } %>
                        <% if (club.contactPhone) { %>
                            <div class="mb-3">
                                <strong><i class="bi bi-telephone me-2"></i>Phone:</strong><br>
                                <a href="tel:<%= club.contactPhone %>" class="text-decoration-none">
                                    <%= club.contactPhone %>
                                </a>
                            </div>
                        <% } %>
                        <% if (club.website) { %>
                            <div class="mb-3">
                                <strong><i class="bi bi-globe me-2"></i>Website:</strong><br>
                                <a href="<%= club.website %>" target="_blank" class="text-decoration-none">
                                    Visit Club Website
                                    <i class="bi bi-box-arrow-up-right ms-1 small"></i>
                                </a>
                            </div>
                        <% } %>
                        
                        <!-- Social Media Links in Contact Information -->
                        <% if (club.facebookUrl || club.instagramUrl || club.twitterUrl) { %>
                            <div class="mb-0">
                                <strong>Follow Us:</strong><br>
                                <div class="social-links mt-2">
                                    <% if (club.facebookUrl) { %>
                                        <a href="<%= club.facebookUrl %>" target="_blank" class="btn btn-facebook btn-sm me-2 mb-1">
                                            <i class="bi bi-facebook"></i> Facebook
                                        </a>
                                    <% } %>
                                    <% if (club.instagramUrl) { %>
                                        <a href="<%= club.instagramUrl %>" target="_blank" class="btn btn-instagram btn-sm me-2 mb-1">
                                            <i class="bi bi-instagram"></i> Instagram
                                        </a>
                                    <% } %>
                                    <% if (club.twitterUrl) { %>
                                        <a href="<%= club.twitterUrl %>" target="_blank" class="btn btn-twitter-x btn-sm me-2 mb-1">
                                            <i class="bi bi-twitter-x"></i> X (Twitter)                                        </a>
                                    <% } %>
                                </div>
                            </div>
                        <% } %>
                    </div>
                </div>
            <% } %>
        </div>
    </div>
</div>

<!-- Full-width Footer Section -->
<div class="club-footer bg-light border-top mt-4">
    <div class="container py-4">
        <div class="row">
            <div class="col-md-6">
                <h5 class="text-primary mb-3">Club Summary</h5>
                <div class="d-flex align-items-center mb-2">
                    <i class="bi bi-geo-alt text-primary me-2"></i>
                    <span><%= club.location %><% if (club.state) { %>, <%= club.state %><% } %></span>
                </div>
                <% if (club.establishedYear) { %>
                    <div class="d-flex align-items-center mb-2">
                        <i class="bi bi-calendar3 text-primary me-2"></i>
                        <span>Established <%= club.establishedYear %></span>
                    </div>
                <% } %>
                <div class="d-flex align-items-center">
                    <i class="bi bi-trophy text-primary me-2"></i>
                    <span><%= clubCarnivals.length %> carnivals hosted (<%= upcomingCarnivals %> upcoming)</span>
                </div>
            </div>
            <div class="col-md-6">
                <h5 class="text-primary mb-3">Quick Actions</h5>
                <div class="d-flex flex-wrap gap-2">
                    <% if (club.contactEmail) { %>
                        <a href="mailto:<%= club.contactEmail %>?subject=Enquiry about <%= club.clubName %>" 
                           class="btn btn-sm btn-primary">
                            <i class="bi bi-envelope"></i> Contact Club
                        </a>
                    <% } %>
                    <a href="/clubs" class="btn btn-sm btn-outline-secondary">
                        <i class="bi bi-arrow-left"></i> Back to All Clubs
                    </a>
                    <% if (club.website) { %>
                        <a href="<%= club.website %>" target="_blank" class="btn btn-sm btn-outline-light">
                            <i class="bi bi-globe"></i> Visit Website
                        </a>
                    <% } %>
                    <% if (club.facebookUrl) { %>
                        <a href="<%= club.facebookUrl %>" target="_blank" class="btn btn-sm btn-facebook">
                            <i class="bi bi-facebook"></i>
                        </a>
                    <% } %>
                    <% if (club.instagramUrl) { %>
                        <a href="<%= club.instagramUrl %>" target="_blank" class="btn btn-sm btn-instagram">
                            <i class="bi bi-instagram"></i>
                        </a>
                    <% } %>
                    <% if (club.twitterUrl) { %>
                        <a href="<%= club.twitterUrl %>" target="_blank" class="btn btn-sm btn-twitter-x">
                            <i class="bi bi-twitter-x"></i>
                        </a>
                    <% } %>
                </div>

                <!-- Admin Actions for Club Members -->
                <% if (user && user.clubId && user.clubId.toString() === club.id.toString()) { %>
                    <div class="mt-3">
                        <h6 class="text-muted mb-2">Admin Actions</h6>
                        <div class="d-flex flex-wrap gap-2">
                            <a href="/carnivals/new" class="btn btn-sm btn-light">
                                <i class="bi bi-plus"></i> Add New Carnival
                            </a>
                            <a href="/clubs/<%= club.id %>/manage" class="btn btn-sm btn-outline-light">
                                <i class="bi bi-gear"></i> Manage Club
                            </a>
                        </div>
                    </div>
                <% } %>
            </div>
        </div>
        
        <!-- Footer disclaimer -->
        <hr class="my-4">
        <div class="row">
            <div class="col-12 text-center text-muted">
                <small>
                    Club information is managed by the club administrators. For questions or corrections, please contact the club directly.
                    <br>
                    <strong>Club ID:</strong> <%= club.id %> | 
                    <strong>Last Updated:</strong> <%= new Date(club.updatedAt).toLocaleDateString('en-AU') %>
                </small>
            </div>
        </div>
    </div>
</div>