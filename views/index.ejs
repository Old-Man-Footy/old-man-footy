<!-- Hero Section -->
<section class="bg-primary text-white py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-4 text-center">
                <img src="/icons/old-man-footy.svg" alt="Old Man Footy Logo" class="img-fluid" style="max-height: 350px;">
            </div>
            <div class="col-lg-8">
                <div class="text-justify mb-5">
                    <p class="lead">The 'Old Man Footy' website is your central hub for 
                        discovering Masters Rugby League carnival events across Australia. 
                        Explore carnivals in local communities nationwide, all with comprehensive 
                        event details readily available to help you plan your next Masters experience.</p>
                </div>
                <div class="d-flex gap-3 flex-wrap">
                    <a href="/carnivals" class="btn btn-light btn-lg">
                        <i class="bi bi-calendar-event"></i> View All Carnivals
                    </a>
                    <% if (!user) { %>
                        <a href="/auth/register" class="btn btn-outline-light btn-lg">
                            <i class="bi bi-person-plus"></i> Register as Club Delegate
                        </a>
                    <% } %>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Upcoming Carnivals Section -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="h3 mb-0">Upcoming Carnivals</h2>
                    <a href="/carnivals" class="btn btn-outline-primary">View All</a>
                </div>
                
                <% if (carnivals && carnivals.length > 0) { %>
                    <div class="row">
                        <% carnivals.forEach(carnival => { %>
                            <div class="col-md-6 col-lg-4 mb-4">
                                <div class="card h-100 shadow-sm">
                                    <% if (carnival.promotionalImageURL) { %>
                                        <img src="<%= carnival.promotionalImageURL %>" class="card-img-top" alt="<%= carnival.title %>" style="height: 200px; object-fit: cover;">
                                    <% } %>
                                    <div class="card-body d-flex flex-column">
                                        <h5 class="card-title"><%= carnival.title %></h5>
                                        <div class="mb-2">
                                            <small class="text-muted">
                                                <i class="bi bi-calendar3"></i> 
                                                <%= carnival.date.toLocaleDateString('en-AU') %>
                                            </small>
                                        </div>
                                        <div class="mb-2">
                                            <small class="text-muted">
                                                <i class="bi bi-geo-alt"></i> 
                                                <%= carnival.locationAddress %>
                                            </small>
                                        </div>
                                        <div class="mb-3">
                                            <span class="badge bg-secondary"><%= carnival.state %></span>
                                        </div>
                                        <p class="card-text flex-grow-1">
                                            <%= carnival.scheduleDetails.substring(0, 100) %>...
                                        </p>
                                        <div class="mt-auto">
                                            <a href="/carnivals/<%= carnival._id %>" class="btn btn-primary btn-sm">
                                                View Details
                                            </a>
                                            <% if (carnival.registrationLink) { %>
                                                <a href="<%= carnival.registrationLink %>" class="btn btn-outline-success btn-sm" target="_blank">
                                                    Register
                                                </a>
                                            <% } %>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <% }) %>
                    </div>
                <% } else { %>
                    <div class="text-center py-5">
                        <i class="bi bi-calendar-x display-4 text-muted mb-3"></i>
                        <h4 class="text-muted">No upcoming carnivals found</h4>
                        <p class="text-muted">Check back later or contact your local club to add their carnival.</p>
                    </div>
                <% } %>
            </div>
        </div>
    </div>
</section>

<!-- Email Subscription Section -->
<section id="subscribe" class="bg-light py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 text-center">
                <h2 class="h3 mb-4">Stay Updated</h2>
                <p class="mb-4">Subscribe to receive notifications about new carnivals in your selected states.</p>
                
                <form method="POST" action="/subscribe" class="needs-validation" novalidate>
                    <div class="row g-3 justify-content-center">
                        <div class="col-md-6">
                            <input type="email" class="form-control" name="email" placeholder="Enter your email" required>
                            <div class="invalid-feedback">Please provide a valid email.</div>
                        </div>
                        <div class="col-md-4">
                            <select class="form-select" name="state" multiple required size="8">
                                <option value="NSW">NSW</option>
                                <option value="QLD">QLD</option>
                                <option value="VIC">VIC</option>
                                <option value="WA">WA</option>
                                <option value="SA">SA</option>
                                <option value="TAS">TAS</option>
                                <option value="NT">NT</option>
                                <option value="ACT">ACT</option>
                            </select>
                            <div class="invalid-feedback">Please select at least one state.</div>
                            <div class="form-text">Hold Ctrl/Cmd to select multiple states</div>
                        </div>
                    </div>
                    
                    <div class="mt-3">
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-envelope"></i> Subscribe
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<!-- MySideline Integration Section -->
<section class="py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h2 class="h3 mb-4">Official Registration</h2>
                <p class="mb-4">
                    All official Masters Rugby League registrations are processed through MySideline. 
                    Find and register with Masters clubs across Australia.
                </p>
                <a href="<%= process.env.MYSIDELINE_URL || '#' %>" class="btn btn-success btn-lg" target="_blank">
                    <i class="bi bi-box-arrow-up-right"></i> Register on MySideline
                </a>
            </div>
            <div class="col-lg-6 text-center">
                <i class="bi bi-person-check display-1 text-success"></i>
            </div>
        </div>
    </div>
</section>